<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        

    </style>
</head>
<body>
    <div class="pdfUploadContainer">
        <label for="pdfInput" class="pdfUploadLabel">Choose PDFs</label>
        <input type="file" id="pdfInput" accept="application/pdf" multiple hidden>
        <div id="uploadPdfStatus" class="uploadingMsg"></div>
        <div id="pdfPreviewContainer" class="pdfPreviewContainer"></div>
    </div>
    <script>

        const uploadedFileNames = new Set();

        document.getElementById("pdfInput").addEventListener("change", function () {
            const files = Array.from(this.files);
            const status = document.getElementById("uploadPdfStatus");
            const container = document.getElementById("pdfPreviewContainer");

            let duplicateFound = false;
            status.textContent = "Uploading...";
            status.style.color = "gray";

            files.forEach(file => {
                if (file.type !== "application/pdf") return;

                if (uploadedFileNames.has(file.name)) {
                    duplicateFound = true;
                    return;
                }

                uploadedFileNames.add(file.name);

                const box = document.createElement("div");
                box.className = "pdfPreviewBox";

                const info = document.createElement("div");
                info.style.display = "flex";
                info.style.alignItems = "center";

                const fileURL = URL.createObjectURL(file);

                const iconLink = document.createElement("a");
                iconLink.href = fileURL;
                iconLink.target = "_blank";
                iconLink.title = "View PDF";

                const icon = document.createElement("img");
                icon.src = "system_img/pdf-icon.jpg"; // Replace with your actual icon path
                icon.alt = "PDF";
                icon.title = "PDF";
                iconLink.appendChild(icon);

                const nameLink = document.createElement("a");
                nameLink.id = "pdfName";
                nameLink.href = fileURL;
                nameLink.target = "_blank";
                nameLink.textContent = file.name;

                info.appendChild(iconLink);
                info.appendChild(nameLink);

                const removePdfBtn = document.createElement("button");
                removePdfBtn.className = "removePdfBtn";
                removePdfBtn.innerHTML = "&times;";
                removePdfBtn.title = "Remove this file";

                removePdfBtn.onclick = function () {
                    uploadedFileNames.delete(file.name);
                    container.removeChild(box);
                    URL.revokeObjectURL(fileURL); // Cleanup
                };

                box.appendChild(info);
                box.appendChild(removePdfBtn);
                container.appendChild(box);
            });

            status.textContent = duplicateFound ? "Cannot upload the same file." : "";
            this.value = ""; // Reset input so same file can be reselected later
            status.style.color = "red";
        });

    </script>
</body>
</html>